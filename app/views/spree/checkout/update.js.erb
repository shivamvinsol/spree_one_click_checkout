<% if @order.blank? %>
  $(window.location.replace('/cart'));
<% elsif @order.complete? %>
  $('div#content').html("<%= j render(file: 'spree/orders/show') %>");
<% else %>
  $('div#checkout').html("<%= j render(partial: 'spree/checkout/form') %>");

  <% if @order.address? %>
    Spree.onAddress()
  <% elsif @order.delivery? %>
    var input = {
      orderTotal: $('#summary-order-total'),
      shipmentTotal: $("[data-hook='shipping-total']"),
      shippingMethods: $("input[data-behavior='shipping-method-selector']")
    };
    new ShippingTotalManager(input).bindEvent();
  <% elsif @order.payment? %>
    Spree.onPayment()
  <% end %>
<% end %>